<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Lab3.2 - Iruzkinak sartu</title>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
		<style>
			body {
				background-color: #FABADA;				
				text-align: center;
			}
			h1 {
				font-family: Magneto;
			}
			#edukia {
				font-family: Impact;
			}
			#izena:hover, #eposta:hover, #mezua:hover {
				border: 3px solid blue;
			}
			#imgL,#imgR{
				position: absolute;
				top: 10%;
			}
			#imgL{
				left: 10%;
			}
			#imgR{
				right: 10%;
			}
		</style>
		<script>
			var izena;
			var eposta;
			var postapubli;
			var mezua;
			
			/*Flag-ak*/
			var iz = false;
			var ep = false;
			var me = false;
			
			function checkIzena(){
				izena = document.getElementById("izena");
				
				if(izena.value===""){
					alert("Ezin da izena hutsik laga");
					itzalGorriaIpini(izena);
					iz = false;
				}
				else
				{
					itzalGorriaKendu(izena);
					iz = true;
				}
			}
			function checkEposta(){
				eposta = document.getElementById("eposta");	
				postapubli = document.getElementById("postapubli");
				
				if(eposta.value!==""){
					postapubli.style="display:inline";
					if(eposta.value.indexOf("@")===-1 || 
							eposta.value.substring(0,eposta.value.indexOf("@")).length===0 ||
							eposta.value.substring(eposta.value.indexOf("@"),eposta.value.length).indexOf(".")===-1 ||
							eposta.value.substring(eposta.value.indexOf("."),eposta.value.length).length<3){
						alert("Epostaren formatua okerra da");
						itzalGorriaIpini(eposta);
						ep = false;
					}
					else
					{
						itzalGorriaKendu(eposta);
						ep = true;
					}
				}
				else{
					postapubli.style="display:none";
					itzalGorriaKendu(eposta);
					ep = true;
				}
			}
			function checkMezua(){
				mezua = document.getElementById("mezua");
				if(mezua.value===""){
					alert("Ezin da mezua hutsik laga");
					itzalGorriaIpini(mezua);
					me = false;
				}
				else
				{
					itzalGorriaKendu(mezua);
					me = true;
				}
			}
			function checkAll(){
				checkIzena();
				checkEposta();
				checkMezua();
				if(iz && ep && me){
					var msg = "Datuak ondo daude:\n";
					msg+="  Izena: "+izena.value+"\n";
					msg+="  Eposta: "+eposta.value+"\n";
					msg+="  Publikoa: ";
					if(document.getElementById("epostaCB").checked===true){
						msg+=" BAI\n";
					}
					else{
						msg+=" EZ\n";
					}
					msg+="  Mezua: "+ mezua.value+"\n";
					msg+="\nDatuak zerbitzarira bidali dira.";
					alert(msg);
				}
				else{
					alert("Datuak ez daude ondo.");
				}
			}
			function itzalGorriaIpini(input){
				input.style="box-shadow: 3px 3px 2px 0 rgba(255, 0, 0, 1),-3px -3px 2px 0 rgba(255, 0, 0, 1);";
			}
			function itzalGorriaKendu(input){
				input.style="box-shadow: 0 0 0 0;";
			}
		</script>
	</head>
	<body>
		<h1>Erregistratu zaitez!</h1>
		<div id="edukia">
			<form id="form" action="">
				<p>Izena: (*)<br/>
				<input type="text" id="izena" onfocus="itzalGorriaKendu(izena)" onblur="checkIzena()"></input></p><br/>				
				<p>Eposta: (*)<br/>
				<input type="text" id="eposta" onblur="checkEposta()" onfocus="itzalGorriaKendu(eposta)"></input></p><br/>
				<p id="postapubli"  style="display:none" >Eposta publiko bat sartu: 
				<input type="checkbox" id="epostaCB" /></p><br/>
				<p>Mezua: (*)<br/>
				<textarea id="mezua" name="mezua" rows="6" cols="50" maxlength="300" style="overflow:auto;resize:none;" onblur="checkMezua()" onfocus="itzalGorriaKendu(mezua)"></textarea></p><br />
				<br/>
				<input type="button" id="bidaliBotoia" value="Datuak bidali" onclick="checkAll()">
			</form>
			<br>
			<a href="iruzkinakIkusi.html">Mezuak ikusi</a>
		</div>
		<div id="imgL"><img id="irudia1" src="http://rubbercat.net/simpsons/homer/dancingjesus.gif" /></div>
		<div id="imgR"><img id="irudia2" src="http://rubbercat.net/simpsons/homer/dancingjesus.gif" /></div>
	</body>
</html>
